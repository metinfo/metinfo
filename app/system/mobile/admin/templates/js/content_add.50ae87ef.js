(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"278":function(e,t,a){"use strict";var n=a(2),r=a(252),o=a(3),l=a(52),s=a(386),i=a(393),c=a(391),p=a(268),u=a(79),d=a(245),m=a(56),f=a(243),b=a(253),v=a(244),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}();var y=function(e){function ParaManage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ParaManage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ParaManage.__proto__||Object.getPrototypeOf(ParaManage)).call(this,e));return t.fetch=function(){var e=t.$router.params.module,a=t.$router.params.class1,n=t.$router.params.class2,r=t.$router.params.class3,o="&module="+Object(v.l)(e)+"&class1="+a+"&class2="+(n||"")+"&class3="+(r||"");t.props.dispatch({"type":"parameter/GetAllParameter","payload":{"url":o,"length":1e3}}),t.props.dispatch({"type":"parameter/GetAddParameter","payload":{"url":o}})},t.openModal=function(e,a){var r=t.props.global.$word,o=t.props.parameter,s=o.add,i=(o.all,t.state),c=i.active,u=i.form,m=(t.$router.params.module,void 0),f=void 0,b=void 0;switch(e){case"Add":s.no_order="0";var v=Object(p.a)(s,r,t);m=r.parmanage,f=n.j.createElement(d.a,{"data":v,"form":t.state.addForm}),b=function onConfirm(){t.save("new")};break;case"AddOption":m=r.add,f=n.j.createElement(d.a,{"data":[{"field":"value","type":"Input","label":r.parametervalueinfo,"required":1}],"form":t.state.optionForm}),b=function onConfirm(){t.saveOption()};break;case"Delete":m=r.delete,f=n.j.createElement(l.a,{"className":"padding"},r.delete_information),b=t.delete;break;case"DeleteOption":m=r.delete,f=n.j.createElement(l.a,{"className":"padding"},r.delete_information),b=function onConfirm(){t.deleteOption(a.index)}}var _={"params":void 0,"title":m,"width":"90%","visible":!0,"content":f,"onConfirm":b};$.each(t.state.active,function(e,t){void 0!==u[e+"-"+c.id]&&(c[e]=u[e+"-"+c.id])});var h=c.optionArr;c.options=[],c.optionArr=[],$.each(h,function(e,t){c.optionArr.push({"type":"Input","label":r.parametervalueinfo,"value":u[t.field],"field":t.field}),c.options.push({"order":e,"value":u[t.field],"id":t.field})}),c.options=JSON.stringify(c.options),t.setState({"active":c}),t.props.modal.openModal(_)},t.edit=function(e){t.setState({"active":e,"current":"detail"})},t.renderList=function(e){var a=t.props.global.$word,r=t.props.parameter.add.para_type;return n.j.createElement(l.a,null,n.j.createElement(l.a,{"className":"cu-list menu text-left solid-top"},e.length>0?e.map(function(e){var a="";return r&&r.map(function(t){if(e.type==t.val)return a=t.name,!1}),n.j.createElement(l.a,{"className":"cu-item arrow","onClick":function onClick(){t.edit(e)}},n.j.createElement(l.a,{"className":"content"},n.j.createElement(s.a,{"className":"text-grey"},e.name)),n.j.createElement(l.a,{"className":"actions align-center flex"},n.j.createElement(s.a,{"className":"cu-tag radius bg-green margin-left-xs"},a)))}):n.j.createElement(l.a,{"className":"cu-item justify-center"},a.no_data),n.j.createElement(i.a,{"className":"cu-btn bg-blue shadow raound btn-add cuIcon lg","onClick":function onClick(){t.openModal("Add")}},n.j.createElement(s.a,{"className":"cuIcon-add"}))),t.renderButton())},t.renderDetail=function(e){t.$router.params.module;var a=t.props.global.$word,r=t.state.active,o=Object(p.a)(r,a,t);return n.j.createElement(l.a,null,n.j.createElement(d.a,{"data":o,"form":t.state.form}),t.renderButton())},t.renderButton=function(){var e=t.props.global.$word,a=t.state.current,r=[{"label":e["detail"===a?"cancel":"close"],"onClick":t.cancel,"bg":"detail"===a?"":"grey"},"detail"===a&&{"label":e.delete,"bg":"red","onClick":function onClick(){t.openModal("Delete")}},"detail"===a&&{"label":e.save,"bg":"blue","onClick":t.save}];return n.j.createElement(f.a,{"data":r,"fixed":"1"})},t.saveOption=function(){var e=t.props.global.$word,a=t.state,n=(a.current,a.active);Object(v.e)([{"field":"value","type":"Input","label":e.parametervalueinfo,"required":1}],t.state.optionForm,function(a,r){r||(n.optionArr.push({"type":"Input","label":e.parametervalueinfo,"value":a.value,"field":"new-"+t.optionadd}),n.options=JSON.parse(n.options),n.options.push({"order":n.options.length,"id":"new-"+t.optionadd,"value":a.value}),n.options=JSON.stringify(n.options),t.forceUpdate(),t.props.modal.handleCancel(),t.optionadd++)})},t.save=function(e){var a=t.$router.params.module,n=t.props.global.$word,r=t.state,o=r.current,l=(r.active,t.props.parameter.add),s="&module="+Object(v.l)(a),i=Object(p.a)(l,n,t);if("new"===e&&Object(v.e)(i,t.state.addForm,function(e,a){if(!a)return e.allid="new-0",void m.c(_({"url":s,"submit_type":"save"},e)).then(function(e){e.status&&(t.fetch(),t.props.modal.handleCancel())})}),"detail"===o){var c=t.state.form,u=t.state.active;return c.allid=u.id,c["options-"+u.id]=[],u.options=u.options?u.options:"[]",$.each(JSON.parse(u.options),function(e,t){c["options-"+u.id].push({"order":e,"id":t.id,"value":c[t.id]})}),c["options-"+u.id]=JSON.stringify(c["options-"+u.id]),void m.c(_({"url":s,"submit_type":"save"},c)).then(function(e){e.status&&(t.setState({"current":"list"}),t.fetch())})}},t.delete=function(){var e=t.$router.params.module,a=t.state,n=a.current,r=a.active,o="&module="+Object(v.l)(e)+"&class1="+t.$router.params.class1;if("detail"===n){var l=t.state.form;l.allid=r.id,l.id=r.id,m.c(_({"url":o,"submit_type":"del"},l)).then(function(e){e.status&&(t.setState({"current":"list"}),t.fetch(),t.props.modal.handleCancel())})}},t.deleteOption=function(e){var a=t.state.active;a.optionArr.splice(e,1),a.options=JSON.parse(a.options),a.options.splice(e,1),a.options=JSON.stringify(a.options),t.forceUpdate(),t.props.modal.handleCancel()},t.cancel=function(){"detail"===t.state.current?t.setState({"current":"list","active":{}}):t.props.toogleParameter()},t.state={"active":{},"current":"list","form":{},"addForm":{},"optionForm":{}},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ParaManage,o["a"].Component),h(ParaManage,[{"key":"componentDidMount","value":function componentDidMount(){this.optionadd=0,this.state.current&&this.fetch()}},{"key":"render","value":function render(){var e=this,t=this.props.parameter.all,a=this.state,r=a.active,o=a.current;return this.props.toogleParameter(this.state.current,function(){return e.setState({"current":"list"})}),n.j.createElement(l.a,{"className":"met-paramanage"},n.j.createElement(c.a,null),"list"===o&&this.renderList(t),"detail"===o&&this.renderDetail(r))}}]),ParaManage}();y=Object(r.a)([Object(b.a)()],y),t.a=Object(u.b)(function(e){return{"parameter":e.parameter,"global":e.global}})(y)},"397":function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(252),o=a(3),l=a(52),s=a(393),i=a(260),c=(a(277),a(79)),p=a(253),u=a(245),d=a(289),m=a(244),f=a(11),b=a(243),v=a(246),_=a(278),h=a(391),y=a(256),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),O=function get(e,t,a){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,a)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(a):void 0};var w=function(e){function ContentAdd(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ContentAdd);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ContentAdd.__proto__||Object.getPrototypeOf(ContentAdd)).call(this,e));return t.config={"navigationBarTitleText":"内容"},t.fetch=function(){var e=t.$router.params.module,a=t.props.content.hasList.indexOf(e)>-1,n="&module="+Object(m.l)(e)+"&class1="+t.$router.params.class1+"&class2="+(t.$router.params.class2||"")+"&class3="+(t.$router.params.class3||"");a&&(t.props.dispatch({"type":"parameter/GetAllParameter","payload":{"url":n}}),t.props.dispatch({"type":"parameter/GetAddParameter","payload":{"url":n}}),t.props.dispatch({"type":"content/GetParameter","payload":{"type":e,"url":n}}),t.props.dispatch({"type":"content/GetColumnSeting","payload":{"class1":t.$router.params.class1,"class2":t.$router.params.class2||0,"class3":t.$router.params.class3||0}})),t.props.dispatch({"type":"content/GetAdd","payload":{"type":e,"url":n}})},t.openModal=function(){var e=t.props.global.$word,a=t.tabset_form(),r=n.j.createElement(l.a,null,n.j.createElement(u.a,{"data":a,"form":t.state.form_set})),o={"title":e.settings_tab,"width":"80%","visible":!0,"content":r,"onConfirm":t.tabset_save,"lable_ok":e.save};t.saveActive(),t.props.modal.openModal(o)},t.back=function(e){if(e=parseInt(e)){var a=e?t.state.form:t.$router.params,n=t.$router.params.module,r=e?"":t.$router.params.name,l="class1="+a.class1+(a.class2?"&class2="+a.class2:"")+(a.class3?"&class3="+a.class3:""),s=a.class1+"-"+(a.class2||0)+"-"+(a.class3||0);t.props.parameter.add.column_options.map(function(e){if(e.val==s)return r=$.trim(e.name.replace(/-/g,"")),!1}),o.a.navigateTo({"url":"/pages/content/detail?"+l+"&module="+n+"&name="+r})}else window.history.go(-1)},t.save=function(){var e=t.$router.params.module;t.$router.params.id;Object(m.e)(t.formList,t.state.form,function(a,n){n||(a.attr.map(function(e){e&&(a[e]="1")}),f.p(e,g({"submit_type":"save"},a)).then(function(e){e.status&&setTimeout(function(){t.back(1)},500)}))})},t.renderContent=function(){var e=t.$router.params.module,a=t.props.content,r=a.add,o=a.list,s=a.tabset,i=t.state,c=i.content,p=i.state_tab,m=t.props.global.$word,f=t.props.content.hasList.indexOf(e)>-1,b=$.isEmptyObject(c)?f||"job"===e?r:o:c;return"product"==e&&(b.tabset=$.isEmptyObject(p)?s:p,b.tabset_btn=t.tabset_btn()),t.formList=b.list?Object(d.a)(b,m,t):[],n.j.createElement(l.a,null,n.j.createElement(u.a,{"data":t.formList,"form":t.state.form})," ",t.renderButton())},t.renderButton=function(){var e=t.props.global.$word,a=[{"label":e.cancel,"onClick":t.back},{"label":e.save,"bg":"blue","onClick":t.save}];return n.j.createElement(b.a,{"data":a,"fixed":"1"})},t.tabset_btn=function(){var e=t.props.global.$word,a=t.props.content.add,r=t.state.content,o=$.isEmptyObject(r)?a:r;return n.j.createElement(l.a,null,n.j.createElement(s.a,{"className":"cu-btn bg-blue margin-right","onClick":function onClick(){var e=o.list.class3?o.list.class3:o.list.class2?o.list.class2:o.list.class1;t.saveActive(),t.props.dispatch({"type":"content/GetClassInfo","payload":{"module":3,"id":o.list.id,"from":"admin","classnow":e},"callback":function callback(){var e=t;setTimeout(function(){e.openModal("tabset")},200)}})}},e.settings_tab))},t.tabset_form=function(){var e=t.props.global.$word,a=t.props.content.classinfo;return a.tab_name=a.tab_name.split("|"),a.tab_name_default=a.tab_name_default.split("|"),[{"type":"Select","label":e.display_number,"field":"tab_num","value":a.tab_num,"rangeKey":"label","options":[{"label":e.default_values+"："+a.tab_num_default,"value":"0"},{"label":1,"value":"1"},{"label":2,"value":"2"},{"label":3,"value":"3"},{"label":4,"value":"4"},{"label":5,"value":"5"}]},{"type":"Input","label":e.tab_title1,"value":a.tab_name[0],"field":"tab_name_0","placeholder":e.default_values+"："+a.tab_name_default[0]},{"type":"Input","label":e.tab_title2,"value":a.tab_name[1]||"","field":"tab_name_1","placeholder":e.default_values+"："+a.tab_name_default[1]},{"type":"Input","label":e.tab_title3,"value":a.tab_name[2]||"","field":"tab_name_2","placeholder":e.default_values+"："+a.tab_name_default[2]},{"type":"Input","label":e.tab_title4,"value":a.tab_name[3]||"","field":"tab_name_3","placeholder":e.default_values+"："+a.tab_name_default[3]},{"type":"Input","label":e.tab_title5,"value":a.tab_name[4]||"","field":"tab_name_4","placeholder":e.default_values+"："+a.tab_name_default[4]}]},t.tabset_save=function(){t.$router.params.id;var e=t.state.form_set,a=t.props.content.add,n=t.state.content,r=$.isEmptyObject(n)?a:n,o=r.list.class3?r.list.class3:r.list.class2?r.list.class2:r.list.class1;f.q(g({"id":r.list.id,"classnow":o,"submit_type":"save"},e)).then(function(e){e.status&&(t.props.dispatch({"type":"content/GetColumnSeting","payload":{"class1":r.list.class1,"class2":r.list.class2,"class3":r.list.class3},"callback":function callback(e){t.setState({"state_tab":e})}}),t.props.modal.handleCancel())})},t.saveActive=function(){var e=t.$router.params.module,a=t.props.content,n=a.add,r=a.list,o=t.state.form,l=t.props.content.hasList.indexOf(e)>-1,s=l||"job"===e?n:r;(l||"job"===e)&&(o.attr.map(function(e){o[e]=1}),$.each(o,function(e,t){s.list[e]=o[e]})),t.setState({"content":s})},t.toogleParameter=function(e,a){Object(y.isString)(e)?t.setState({"para_current":e,"setpara_current":a}):"detail"==t.state.para_current?t.state.setpara_current():(t.state.parameter||t.saveActive(),t.setState({"parameter":!t.state.parameter,"change":!0,"para_current":"list"}),t.state.parameter&&t.fetch())},t.state={"form":{},"form_set":{},"parameter":!1,"change":!1,"para_current":"list","setpara_current":{},"content":{},"state_tab":{}},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ContentAdd,o["a"].Component),j(ContentAdd,[{"key":"componentDidShow","value":function componentDidShow(){this.fetch()}},{"key":"render","value":function render(){var e=this.props.global.$word,t=this.state.parameter;return n.j.createElement(l.a,{"className":"met-content-detail padding-bottom-xlg"},n.j.createElement(h.a,null),n.j.createElement(v.a,{"title":t?e.article6:e.addinfo,"leftClick":t?this.toogleParameter:this.back}),n.j.createElement(i.a,{"scrollY":!0},t?n.j.createElement(_.a,{"toogleParameter":this.toogleParameter}):this.renderContent()))}},{"key":"componentDidMount","value":function componentDidMount(){O(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidMount",this)&&O(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){O(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidHide",this)&&O(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidHide",this).call(this)}}]),ContentAdd}();w=Object(r.a)([Object(p.a)()],w),t.default=Object(c.b)(function(e){return{"content":e.content,"global":e.global,"parameter":e.parameter}})(w)}}]);